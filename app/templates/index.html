<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hochschulen in Deutschland</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>Hochschulen in Deutschland</h1>

    <form id="filterForm" method="get" action="/">
        <label for="search">Suche:</label>
        <select name="search_attr" id="search_attr" onchange="submitForm()">
            <option value="name_h" {% if parameters.search_attr == 'name_h' %}selected{% endif %}>Hochschulname</option>
            <option value="typ" {% if parameters.search_attr == 'typ' %}selected{% endif %}>Typ</option>
            <option value="traeger" {% if parameters.search_attr == 'traeger' %}selected{% endif %}>Träger</option>
            <option value="land" {% if parameters.search_attr == 'land' %}selected{% endif %}>Land</option>
            <option value="precht" {% if parameters.search_attr == 'precht' %}selected{% endif %}>Precht</option>
            <option value="hrecht" {% if parameters.search_attr == 'hrecht' %}selected{% endif %}>Hrecht</option>
            <option value="str" {% if parameters.search_attr == 'str' %}selected{% endif %}>Straße</option>
            <option value="ort" {% if parameters.search_attr == 'ort' %}selected{% endif %}>Ort</option>
            <option value="web" {% if parameters.search_attr == 'web' %}selected{% endif %}>Web</option>
        </select>
        <input type="text" name="search" id="search" value="{{ parameters.search }}">
        <button type="submit">Suche</button>

        <label for="order">Sortieren:</label>
        <select name="order" id="order" onchange="submitForm()">
            <option value="ASC" {% if parameters.order == 'ASC' %}selected{% endif %}>Aufsteigend</option>
            <option value="DESC" {% if parameters.order == 'DESC' %}selected{% endif %}>Absteigend</option>
        </select>

        <label for="sort_by">Sortieren nach:</label>
        <select name="sort_by" id="sort_by" onchange="submitForm()">
            <option value="name_h" {% if parameters.sort_by == 'name_h' %}selected{% endif %}>Hochschulname</option>
            <option value="gjahr" {% if parameters.sort_by == 'gjahr' %}selected{% endif %}>Gründungsjahr</option>
            <option value="typ" {% if parameters.sort_by == 'typ' %}selected{% endif %}>Typ</option>
            <option value="traeger" {% if parameters.sort_by == 'traeger' %}selected{% endif %}>Träger</option>
            <option value="land" {% if parameters.sort_by == 'land' %}selected{% endif %}>Land</option>
            <option value="studenten" {% if parameters.sort_by == 'studenten' %}selected{% endif %}>Studenten</option>
            <option value="precht" {% if parameters.sort_by == 'precht' %}selected{% endif %}>Precht</option>
            <option value="hrecht" {% if parameters.sort_by == 'hrecht' %}selected{% endif %}>Hrecht</option>
            <option value="str" {% if parameters.sort_by == 'str' %}selected{% endif %}>Straße</option>
            <option value="ort" {% if parameters.sort_by == 'ort' %}selected{% endif %}>Ort</option>
            <option value="b.total_population" {% if parameters.sort_by == 'b.total_population' %}selected{% endif %}>Einwohner</option>
        </select>

        <label for="limit">Limitieren:</label>
        <input type="number" name="limit" id="limit" value="{{ parameters.limit }}" min="1" onchange="submitForm()">

        <label>Felder:</label><br>
        <div class="checkbox-group">
            <input type="hidden" name="attributes" value="">
            <input type="checkbox" name="attributes" value="h.name_h" {% if 'h.name_h' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Hochschulname<br>
            <input type="checkbox" name="attributes" value="h.gjahr" {% if 'h.gjahr' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Gründungsjahr<br>
            <input type="checkbox" name="attributes" value="h.typ" {% if 'h.typ' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Typ<br>
            <input type="checkbox" name="attributes" value="h.traeger" {% if 'h.traeger' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Träger<br>
            <input type="checkbox" name="attributes" value="h.land" {% if 'h.land' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Land<br>
            <input type="checkbox" name="attributes" value="h.studenten" {% if 'h.studenten' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Studenten<br>
            <input type="checkbox" name="attributes" value="h.precht" {% if 'h.precht' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Precht<br>
            <input type="checkbox" name="attributes" value="h.hrecht" {% if 'h.hrecht' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Hrecht<br>
            <input type="checkbox" name="attributes" value="h.str" {% if 'h.str' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Straße<br>
            <input type="checkbox" name="attributes" value="h.ort" {% if 'h.ort' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Ort<br>
            <input type="checkbox" name="attributes" value="h.web" {% if 'h.web' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Web<br>
            <input type="checkbox" name="attributes" value="b.total_population" {% if 'b.total_population' in parameters.attributes %}checked{% endif %} onchange="submitForm()"> Einwohner<br>
        </div>

        <input type="hidden" name="generate_map" id="generate_map" value="">

    </form>
    <div id="map">
        {{ map|safe }}
    </div>
    {{ table | safe }}

    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
</body>
</html>